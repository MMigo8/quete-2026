<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>La Qu√™te 2026</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
/* ================= VARIABLES ================= */
body {
  --bg: #111827;
  --card: rgba(255,255,255,0.06);
  --text: #f9fafb;
  --accent: #60a5fa;
}

/* ===== THE OFFICE ===== */
body.theme-office {
  --bg: #f4f1ec;
  --card: #ffffff;
  --text: #1f2933;
  --accent: #2563eb;
}

/* ===== TOY STORY ===== */
body.theme-toystory {
  --bg: #6b9ac4;
  --card: #ffffff;
  --text: #1f2933;
  --accent: #fbbf24;
  background-image: url("https://i.imgur.com/6b6PSkC.png");
  background-size: cover;
  background-attachment: fixed;
}

/* ================= GLOBAL ================= */
body {
  font-family: system-ui, sans-serif;
  background: var(--bg);
  color: var(--text);
  padding: 24px;
  max-width: 900px;
  margin: auto;
}

h1 {
  text-align: center;
  font-size: 2.2rem;
}

#current-month {
  text-align: center;
  opacity: 0.8;
  margin-bottom: 12px;
}

/* ================= THEME SELECT ================= */
#theme-select {
  display: block;
  margin: 0 auto 20px;
  padding: 6px 12px;
  border-radius: 8px;
  border: none;
  background: var(--card);
  color: var(--text);
}

/* ================= PROGRESS ================= */
#progress-container {
  background: rgba(255,255,255,0.15);
  border-radius: 12px;
  height: 24px;
  margin: 20px 0;
  overflow: hidden;
}

#progress-bar {
  height: 100%;
  width: 0%;
  background: var(--accent);
  transition: width 0.3s ease;
}

#progress-text {
  text-align: center;
  font-weight: bold;
  margin-bottom: 24px;
}

/* ================= DAILY ================= */
#daily-challenge-btn {
  padding: 8px 16px;
  border-radius: 12px;
  border: none;
  background: var(--accent);
  color: black;
  cursor: pointer;
}

#daily-challenge-text {
  margin-top: 10px;
  font-weight: bold;
  text-align: center;
}

/* ================= SECTIONS ================= */
.section {
  background: var(--card);
  border-radius: 16px;
  padding: 16px;
  margin-bottom: 20px;
}

.task {
  display: flex;
  gap: 10px;
  margin: 8px 0;
}

.task input {
  width: 20px;
  height: 20px;
  accent-color: var(--accent);
}

.reward {
  margin-top: 10px;
  opacity: 0.7;
  font-style: italic;
}

/* ================= SECTION FINIE ================= */
#section-finished {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(0,0,0,0.85);
  color: white;
  padding: 20px 30px;
  border-radius: 20px;
  font-size: 1.6rem;
  display: none;
  z-index: 9999;
}

footer {
  text-align: center;
  opacity: 0.6;
  margin-top: 40px;
}
</style>
</head>

<body>

<h1>üéÆ La Qu√™te 2026</h1>
<p id="current-month"></p>

<select id="theme-select">
  <option value="default">üåà Default</option>
  <option value="office">üé¨ The Office</option>
  <option value="toystory">üß∏ Toy Story</option>
</select>

<div style="text-align:center; margin-bottom:20px;">
  <button id="daily-challenge-btn">üé≤ Surprise du jour</button>
  <p id="daily-challenge-text"></p>
</div>

<div id="progress-container">
  <div id="progress-bar"></div>
</div>
<p id="progress-text">0% accompli</p>

<!-- SECTIONS -->
<div class="section">
<h2>üå± Prendre soin de soi</h2>
<div class="task"><input type="checkbox" class="task-checkbox"> Dire non √† quelque chose qui me p√®se</div>
<div class="task"><input type="checkbox" class="task-checkbox"> Prendre un moment solo</div>
<div class="task"><input type="checkbox" class="task-checkbox"> M√©diter 5 minutes</div>
</div>

<div class="section">
<h2>üé¨ Films & s√©ries</h2>
<div class="task"><input type="checkbox" class="task-checkbox"> Revoir un √©pisode comfort</div>
<div class="task"><input type="checkbox" class="task-checkbox"> √âcrire une √©motion</div>
<div class="task"><input type="checkbox" class="task-checkbox"> Mini review</div>
</div>

<div class="section">
<h2>‚úçÔ∏è Cr√©ation</h2>
<div class="task"><input type="checkbox" class="task-checkbox"> √âcrire une id√©e</div>
<div class="task"><input type="checkbox" class="task-checkbox"> Cr√©er sans pression</div>
</div>

<div class="section">
<h2>üéÆ Jeux</h2>
<div class="task"><input type="checkbox" class="task-checkbox"> Jouer 30 min</div>
<div class="task"><input type="checkbox" class="task-checkbox"> Tester un d√©fi</div>
</div>

<div class="section">
<h2>ü§ù Social</h2>
<div class="task"><input type="checkbox" class="task-checkbox"> Message sympa</div>
<div class="task"><input type="checkbox" class="task-checkbox"> Moment avec Mael</div>
</div>

<div id="section-finished">üéâ Section finie !</div>

<footer>Reviens quand tu veux üíõ</footer>

<!-- AUDIO -->
<audio id="ding" src="https://www.myinstants.com/media/sounds/ding-sound-effect.mp3"></audio>
<audio id="section-sound" src="https://www.myinstants.com/media/sounds/wow-anime-meme-55752.mp3"></audio>
<audio id="toystory-music" src="https://www.myinstants.com/media/sounds/toy-story-theme.mp3" loop></audio>

<script>
document.addEventListener("DOMContentLoaded", () => {

/* ===== MOIS ===== */
const now = new Date();
const monthKey = `quest-${now.getFullYear()}-${now.getMonth()}`;
document.getElementById("current-month").textContent =
  "üóìÔ∏è " + now.toLocaleDateString("fr-FR", { month:"long", year:"numeric" });

/* ===== THEME ===== */
const themeSelect = document.getElementById("theme-select");
const toyMusic = document.getElementById("toystory-music");
const savedTheme = localStorage.getItem("theme") || "default";

function applyTheme(theme){
  document.body.classList.toggle("theme-office", theme==="office");
  document.body.classList.toggle("theme-toystory", theme==="toystory");

  if(theme==="toystory"){ toyMusic.play(); }
  else { toyMusic.pause(); }
}

themeSelect.value = savedTheme;
applyTheme(savedTheme);

themeSelect.addEventListener("change", ()=>{
  applyTheme(themeSelect.value);
  localStorage.setItem("theme", themeSelect.value);
});

/* ===== CHECKBOXES ===== */
const checkboxes = document.querySelectorAll(".task-checkbox");
const bar = document.getElementById("progress-bar");
const text = document.getElementById("progress-text");
const ding = document.getElementById("ding");
const sectionSound = document.getElementById("section-sound");
const message = document.getElementById("section-finished");

function update(){
  const checked = [...checkboxes].filter(c=>c.checked).length;
  const percent = Math.round(checked/checkboxes.length*100);
  bar.style.width = percent+"%";
  text.textContent = percent+"% accompli";
}

checkboxes.forEach((cb,i)=>{
  cb.checked = localStorage.getItem("quest-"+i)==="true";
  cb.addEventListener("change", ()=>{
    ding.currentTime=0; ding.play();
    confetti({particleCount:30,spread:60,origin:{y:0.8}});
    localStorage.setItem("quest-"+i,cb.checked);
    update();

    const section = cb.closest(".section");
    if([...section.querySelectorAll(".task-checkbox")].every(c=>c.checked)){
      sectionSound.play();
      confetti({particleCount:400,spread:180});
      message.style.display="block";
      setTimeout(()=>message.style.display="none",2000);
    }
  });
});

update();

/* ===== DAILY ===== */
const challenges=[
 "√âcris une sc√®ne audio",
 "Regarde un √©pisode comfort",
 "Fais une review Letterboxd",
 "Message fun √† Mael",
 "Dessin chibi Pixar",
 "Danse victoire 30s"
];

const key=`challenges-${now.getMonth()}-${now.getFullYear()}`;
let monthChallenges=JSON.parse(localStorage.getItem(key));
if(!monthChallenges){
  monthChallenges=[...Array(31)].map(()=>challenges[Math.floor(Math.random()*challenges.length)]);
  localStorage.setItem(key,JSON.stringify(monthChallenges));
}

document.getElementById("daily-challenge-btn").onclick=()=>{
  document.getElementById("daily-challenge-text").textContent=
   "üéÅ "+monthChallenges[now.getDate()-1];
};

});
</script>

</body>
</html>

