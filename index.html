<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>La QuÃªte 2026</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
/* ================= VARIABLES ================= */
body {
  --bg: #111827;
  --card: rgba(255,255,255,0.06);
  --text: #f9fafb;
  --accent: #60a5fa;
}

/* ===== THE OFFICE THEME ===== */
body.theme-office {
  --bg: #f4f1ec;
  --card: #ffffff;
  --text: #1f2933;
  --accent: #2563eb;
}
  
/* ===== TOY STORY ===== */
body.theme-toystory {
  --bg: url('4e2b60f7-1339-4876-8c31-14fb4208458b.png') no-repeat center center fixed;
  --card: rgba(255,255,255,0.8);
  --text: #1f2933;
  --accent: #3b82f6; /* bleu jouet */
  background-size: cover;
}

/* ================= GLOBAL ================= */
body {
  font-family: system-ui, sans-serif;
  background: var(--bg);
  color: var(--text);
  padding: 24px;
  max-width: 900px;
  margin: auto;
}

h1 {
  text-align: center;
  font-size: 2.2rem;
  margin-bottom: 6px;
}

#current-month {
  text-align: center;
  opacity: 0.8;
  margin-bottom: 12px;
}

/* ================= THEME SELECT ================= */
#theme-select {
  display: block;
  margin: 0 auto 20px;
  padding: 6px 12px;
  border-radius: 8px;
  border: none;
  background: var(--card);
  color: var(--text);
}

/* ================= PROGRESS ================= */
#progress-container {
  background: rgba(255,255,255,0.15);
  border-radius: 12px;
  height: 24px;
  margin: 20px 0;
  overflow: hidden;
}

#progress-bar {
  height: 100%;
  width: 0%;
  background: var(--accent);
  transition: width 0.3s ease;
}

#progress-text {
  text-align: center;
  font-weight: bold;
  margin-bottom: 24px;
}

/* ================= DAILY CHALLENGE ================= */
#daily-challenge-btn {
  display: inline-block;
  padding: 8px 16px;
  border-radius: 12px;
  border: none;
  background: var(--accent);
  color: var(--bg);
  cursor: pointer;
}

#daily-challenge-text {
  margin-top: 10px;
  font-weight: bold;
  text-align: center;
}

/* ================= SECTIONS ================= */
.section {
  background: var(--card);
  border-radius: 16px;
  padding: 16px;
  margin-bottom: 20px;
}

.task {
  display: flex;
  gap: 10px;
  margin: 8px 0;
}

.task input {
  width: 20px;
  height: 20px;
  accent-color: var(--accent);
}

.reward {
  margin-top: 10px;
  opacity: 0.7;
  font-style: italic;
}

/* ================= SECTION FINIE ================= */
#section-finished {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(0,0,0,0.85);
  color: white;
  padding: 20px 30px;
  border-radius: 20px;
  font-size: 1.6rem;
  display: none;
  z-index: 9999;
}

footer {
  text-align: center;
  opacity: 0.6;
  margin-top: 40px;
}
</style>
</head>

<body>

<h1>ğŸ® La QuÃªte 2026</h1>
<p id="current-month"></p>

<select id="theme-select">
  <option value="default">ğŸŒˆ Default</option>
  <option value="office">ğŸ¬ The Office</option>
</select>

<div style="text-align:center; margin-bottom:20px;">
  <button id="daily-challenge-btn">ğŸ² Surprise du jour</button>
  <p id="daily-challenge-text"></p>
</div>

<div id="progress-container">
  <div id="progress-bar"></div>
</div>
<p id="progress-text">0% accompli</p>

<!-- ===== SECTIONS ===== -->
<div class="section">
<h2>ğŸŒ± Prendre soin de soi</h2>
<div class="task"><input type="checkbox" class="task-checkbox"> Dire non Ã  quelque chose qui me pÃ¨se</div>
<div class="task"><input type="checkbox" class="task-checkbox"> Prendre un moment solo</div>
<div class="task"><input type="checkbox" class="task-checkbox"> MÃ©diter 5 minutes</div>
<div class="reward">ğŸ Bien-Ãªtre assurÃ©</div>
</div>

<div class="section">
<h2>ğŸ¬ Films & sÃ©ries</h2>
<div class="task"><input type="checkbox" class="task-checkbox"> Revoir un Ã©pisode prÃ©fÃ©rÃ©</div>
<div class="task"><input type="checkbox" class="task-checkbox"> Noter une Ã©motion ressentie</div>
<div class="task"><input type="checkbox" class="task-checkbox"> Ã‰crire une mini review</div>
<div class="reward">ğŸ CÅ“ur lÃ©ger</div>
</div>

<div class="section">
<h2>âœï¸ CrÃ©ation</h2>
<div class="task"><input type="checkbox" class="task-checkbox"> Ã‰crire une idÃ©e</div>
<div class="task"><input type="checkbox" class="task-checkbox"> CrÃ©er sans finir</div>
<div class="task"><input type="checkbox" class="task-checkbox"> Avancer sur un projet</div>
<div class="reward">ğŸ Dopamine crÃ©ative</div>
</div>

<div class="section">
<h2>ğŸ® Jeux</h2>
<div class="task"><input type="checkbox" class="task-checkbox"> Jouer 30 minutes</div>
<div class="task"><input type="checkbox" class="task-checkbox"> Tester un nouveau dÃ©fi</div>
<div class="reward">ğŸ Fun garanti</div>
</div>

<div class="section">
<h2>ğŸ¤ Social</h2>
<div class="task"><input type="checkbox" class="task-checkbox"> Envoyer un message sympa</div>
<div class="task"><input type="checkbox" class="task-checkbox"> Partager un moment avec Mael</div>
<div class="reward">ğŸ Sourires partagÃ©s</div>
</div>

<div class="section">
<h2>âœ¨ Bonus</h2>
<div class="task"><input type="checkbox" class="task-checkbox"> Moment rÃ©confort</div>
<div class="task"><input type="checkbox" class="task-checkbox"> Prendre du temps pour soi</div>
<div class="reward">ğŸ SÃ©rÃ©nitÃ© maximale</div>
</div>

<div id="section-finished">ğŸ‰ Section finie !</div>

<footer>Reviens cocher une case quand tu veux ğŸ’›</footer>

<audio id="ding" src="https://www.myinstants.com/media/sounds/ding-sound-effect.mp3"></audio>
<audio id="section-sound" src="https://www.myinstants.com/media/sounds/wow-anime-meme-55752.mp3"></audio>

<script>
document.addEventListener("DOMContentLoaded", () => {

  /* ===== MOIS ===== */
  const monthDisplay = document.getElementById("current-month");
  const now = new Date();
  const monthName = now.toLocaleDateString("fr-FR", { month: "long", year: "numeric" });
  monthDisplay.textContent = "ğŸ—“ï¸ " + monthName.charAt(0).toUpperCase() + monthName.slice(1);

  /* ===== THEME ===== */
  const themeSelect = document.getElementById("theme-select");
  const savedTheme = localStorage.getItem("theme") || "default";
  document.body.classList.toggle("theme-office", savedTheme === "office");
  themeSelect.value = savedTheme;

  themeSelect.addEventListener("change", () => {
    document.body.classList.toggle("theme-office", themeSelect.value === "office");
    localStorage.setItem("theme", themeSelect.value);
  });
// ==================== RESET MENSUEL AUTOMATIQUE ====================
const currentMonth = new Date().getMonth(); // 0 = janvier
const lastMonth = localStorage.getItem('lastMonth');

// Si le mois a changÃ©
if (lastMonth === null || parseInt(lastMonth) !== currentMonth) {
  // Animation douce pour dÃ©cocher chaque case
  checkboxes.forEach((cb, index) => {
    setTimeout(() => {
      cb.checked = false;
      cb.parentElement.style.transition = "opacity 0.3s";
      cb.parentElement.style.opacity = "0.3";
      setTimeout(() => cb.parentElement.style.opacity = "1", 300);
    }, index * 50); // effet cascade
  });

  // Mettre Ã  jour le mois stockÃ©
  localStorage.setItem('lastMonth', currentMonth);

  // Reset la barre de progression
  progressBar.style.width = "0%";
  progressText.textContent = "0% accompli";

  // Confettis pour nouveau mois
  confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });

  // Message d'alerte
  alert("âœ¨ Nouveau mois ! Toutes les cases ont Ã©tÃ© rÃ©initialisÃ©es.");
}

  /* ===== PROGRESSION / CHECKBOXES ===== */
  const checkboxes = document.querySelectorAll(".task-checkbox");
  const progressBar = document.getElementById("progress-bar");
  const progressText = document.getElementById("progress-text");
  const ding = document.getElementById("ding");
  const sectionSound = document.getElementById("section-sound");
  const message = document.getElementById("section-finished");

  function updateProgress() {
    const checked = [...checkboxes].filter(c => c.checked).length;
    const percent = Math.round((checked / checkboxes.length) * 100);
    progressBar.style.width = percent + "%";
    progressText.textContent = percent + "% accompli";
  }

  function save() {
    checkboxes.forEach((cb, i) => localStorage.setItem("quest-" + i, cb.checked));
  }

  function load() {
    checkboxes.forEach((cb, i) => cb.checked = localStorage.getItem("quest-" + i) === "true");
    updateProgress();
  }

  checkboxes.forEach(cb => {
    cb.addEventListener("change", () => {
      ding.currentTime = 0; ding.play();
      confetti({ particleCount: 30, spread: 60, origin: { y: 0.8 } });
      updateProgress(); save();

      const section = cb.closest(".section");
      const all = section.querySelectorAll(".task-checkbox");
      if ([...all].every(c => c.checked)) {
        sectionSound.play();
        confetti({ particleCount: 400, spread: 180 });
        message.style.display = "block";
        setTimeout(() => message.style.display = "none", 2000);
      }
    });
  });

  load();

  /* ===== DAILY CHALLENGE ===== */
  const challenges = [
    "Ã‰cris une mini scÃ¨ne de ton livre audio",
    "Regarde un Ã©pisode comfort",
    "Fais un challenge dans Minecraft ou Stardew",
    "Envoie un message fun Ã  Mael",
    "Note une Ã©motion ressentie sur ton Ã©pisode prÃ©fÃ©rÃ©",
    "Fais un petit dessin chibi dâ€™un personnage Pixar",
    "Fais une danse de victoire de 30s ğŸ•º"
  ];

  const challengeBtn = document.getElementById("daily-challenge-btn");
  const challengeText = document.getElementById("daily-challenge-text");

  const monthKey = `daily-challenges-${now.getMonth()}-${now.getFullYear()}`;
  let dailyChallenges = JSON.parse(localStorage.getItem(monthKey));
  if (!dailyChallenges) {
    dailyChallenges = [];
    const copy = [...challenges];
    for (let i = 0; i < 31; i++) {
      if (copy.length === 0) copy.push(...challenges);
      const randIndex = Math.floor(Math.random() * copy.length);
      dailyChallenges.push(copy.splice(randIndex,1)[0]);
    }
    localStorage.setItem(monthKey, JSON.stringify(dailyChallenges));
  }

  challengeBtn.addEventListener("click", () => {
    const day = now.getDate() - 1;
    const challenge = dailyChallenges[day];
    challengeText.textContent = "ğŸ DÃ©fi du jour : " + challenge;
    confetti({ particleCount: 50, spread: 70, origin: { y: 0.6 } });
    ding.currentTime = 0; ding.play();
  });

});
</script>

</body>
</html>


